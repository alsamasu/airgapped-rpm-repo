# ansible/inventories/hosts.yml
# Inventory for airgapped RPM repository infrastructure
#
# Host identity is determined by the 'airgap_host_id' variable.
# If not set, falls back to machine-id.

all:
  vars:
    # Internal repository settings
    internal_repo_host: rpm-publisher
    internal_repo_https_port: 8443
    internal_repo_url: "https://{{ internal_repo_host }}:{{ internal_repo_https_port }}"
    
    # Syslog TLS forwarding (server-auth only, no client certs)
    syslog_tls_target_host: syslog-sink
    syslog_tls_target_port: 6514
    syslog_tls_ca_bundle_path: /etc/pki/tls/certs/syslog-ca.crt
    
    # Lifecycle environment (testing or stable)
    repo_lifecycle_env: stable
    
  children:
    # Internal infrastructure servers
    internal_servers:
      hosts:
        rpm-publisher:
          ansible_host: rpm-publisher
          airgap_host_id: rpm-publisher-01
          
    # Managed RHEL 9 hosts
    rhel9_hosts:
      vars:
        ansible_python_interpreter: /usr/bin/python3
        repo_profile: rhel9
      hosts:
        # Example hosts - override in environment-specific inventory
        test-ubi9:
          ansible_host: ssh-host-ubi9
          ansible_port: 22
          airgap_host_id: test-ubi9-01
          
    # Managed RHEL 8 hosts  
    rhel8_hosts:
      vars:
        ansible_python_interpreter: /usr/bin/python3
        repo_profile: rhel8
      hosts:
        test-ubi8:
          ansible_host: ssh-host-ubi8
          ansible_port: 22
          airgap_host_id: test-ubi8-01

    # All managed hosts (for patching, manifests, etc.)
    managed_hosts:
      children:
        rhel9_hosts:
        rhel8_hosts:
