# ansible.cfg - Ansible configuration for airgapped environment
#
# Optimized for disconnected operation with security best practices.

[defaults]
# Inventory
inventory = /runner/inventory/hosts.yml

# Playbook settings
forks = 10
timeout = 30
gather_facts = smart
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /runner/artifacts/facts
fact_caching_timeout = 86400

# SSH settings
remote_user = root
private_key_file = /runner/.ssh/id_ed25519

# Output
stdout_callback = yaml
callback_whitelist = profile_tasks, timer

# Logging
log_path = /runner/artifacts/ansible.log

# Security
host_key_checking = False
retry_files_enabled = False

# Performance
pipelining = True

[inventory]
enable_plugins = yaml, ini, auto

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no
pipelining = True
control_path_dir = /tmp/ansible-ssh-%%h-%%p-%%r

[persistent_connection]
command_timeout = 30
connect_timeout = 30
